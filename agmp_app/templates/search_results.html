{% extends "mainLayout.html" %}
{% load crispy_forms_tags %}
{% load bootstrap4 %}
{% load static %}

{% block title%}Search{% endblock %}

{% block js %}
<script src="{% static 'js/search.js' %}" type="text/JavaScript"></script>
{% endblock %}

{% comment %}
https://simpleisbetterthancomplex.com/tutorial/2018/08/13/how-to-use-bootstrap-4-forms-with-django.html
{% endcomment %}



{% block banner %}


{% include 'partials/banner_search.html' %}

{% endblock %}
{% block content %}
<style>    
  .centered-columns {
    display: flex;
    justify-content: center;
  }
  #id_search_query{
    width:100%;
  }
  .btn{
    width:100%;
  }
 </style>




<form method="post">
    {% csrf_token %}
    <div class="search_form">

      <div class="row centered-columns">
        <div class="col-md-3 col-sm-3 text-center"> {{ form.search_option.3}}  <img src="{% static 'img/noun_Disease_2078983.svg' %}" alt="Image" width="25%"> </div>
        <div class="col-md-3 col-sm-3 text-center"> {{ form.search_option.2 }}  <img src="{% static 'img/noun_Drug_2227411.svg' %}" alt="Image" width="25%"> </div>
        <div class="col-md-3 col-sm-3 text-center"> {{ form.search_option.0 }} <img src="{% static 'img/noun_choice_of_option_2765906.svg' %}" alt="Image" width="25%"> </div>
        <div class="col-md-3 col-sm-3 text-center"> {{ form.search_option.1 }} <img src="{% static 'img/noun_genes_1767492.svg' %}" alt="Image" width="25%"> </div>


    </div>

    <div class="row centered-columns mt-3 mb-3 ml-7">

        <div class="col-md-9 col-sm-9 text-center ">{{ form.search_query}}</div>
        <div class="col-md-3 col-sm-3 text-center ">
            <button class= "btn btn-success btn-sm" type="submit">Search</button> </div>


    </div>

  

     
      
  {% comment %} {{ form.as_p }} {% endcomment %}

  </div>
</form>

<div class="text-left">

{% if search_option == "Variantagmp" %}
   
   {% for result in results %}
       <b>rs ID: </b>{{ result.rs_id}}<br>
        <b>Chromosome: </b>{{ result.geneagmp.chromosome}}<br>
        <b>Gene: </b>{{ result.geneagmp.gene_id}}<br>
        <a href="{% url 'Var_Drug_Assoc' result.rs_id %}" target="_blank">Variant-Drug Associations </a> <br>
        <a href="{% url 'Variant_Disease_Assoc' result.rs_id %}" target="_blank">Variant Disease Associations </a><br>
        
        <hr>
    
    {% endfor %} 

    {% elif search_option == "Geneagmp" %}

    {% for result in results %}
       <b>Gene </b>{{ result.gene_id}}<br>
        <b>Chromosome: </b>{{result.chromosome}}<br>
        <a href="{% url 'PhamacogeneDrugAssoc' result.gene_id %}" target="_blank">Gene Associations </a> <br><hr>
    {% endfor %}   
    {% elif search_option == "Drugagmp" %}
 {% for result in results %}
     <b></b>{{result.drug_name}}<br>
     <b>Drug Bank ID: </b><a href="https://go.drugbank.com/drugs/{{result.drug_bank_id}}" target="_blank">{{result.drug_bank_id}}</a>
     <br>
     <b>State: </b>{{result.state}}<br>
      <a href="{% url 'VariantDrugAssociation' result.drug_id %}">Variant Drug Associations</a><br> 
   <hr>
 {% endfor %}   
 {% elif search_option == "Disease" %}
 {% for result in results %}
 <b>rs ID: </b>{{result.rs_id}}<br>
 <b></b>{{result.phenotypeagmp.name}}<br>
 <a href="{% url 'DiseaseVariant' result.rs_id %}" target="_blank">Variant Disease Associations</a><br><hr>

{% endfor %}  



{% else  %}
    <p class="" width="auto">No results found.</p>
{% endif %}

</div>

{% endblock %}
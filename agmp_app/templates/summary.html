{% extends 'mainLayout.html' %}
{% load static %}
{% block title %}Summary{% endblock %}

{% block banner %}


{% include 'partials/banner_summary.html' %}

{% endblock %}



{% block content %}

{% load leaflet_tags %}
{% block js%}

<style>
  .hiddenbox_1 {
    display: none;
    visibility: hidden;
  }
  #map {
    height: 100%
  }

  {% comment %} #map {
    height: 400px;
} {% endcomment %}
</style>

{% leaflet_js %}
{% endblock %}

{%block css%}
{% leaflet_css %}

{% block scripts %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />

<script>
  ///graph1
  $(document).ready(function () {

    const ctx = document.getElementById('myChart01').getContext('2d');
    const myChart01 = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [{% for i in qs_drug %}'{{i.drug_name | safe}}',{% endfor %}],
    datasets: [{
      label: 'No of Publications',
      data: [{% for i in qs_drug %}'{{i.publicationsCount | safe}}', {% endfor %}],
    backgroundColor: [
    'rgba(255, 99, 132, 0.2)',
    'rgba(54, 162, 235, 0.2)',
    'rgba(255, 206, 86, 0.2)',
    'rgba(75, 192, 192, 0.2)',
    'rgba(153, 102, 255, 0.2)',
    'rgba(255, 159, 64, 0.2)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(285, 159, 64, 5.2)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',
  ],
    borderColor: [
    'rgba(255, 99, 132, 1)',
    'rgba(54, 162, 235, 1)',
    'rgba(255, 206, 86, 1)',
    'rgba(75, 192, 192, 1)',
    'rgba(153, 102, 255, 1)',
    'rgba(255, 159, 64, 1)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(255, 159, 64, 1)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',
  ],
    borderWidth: 1
    }]
      },
    options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
    });



  });

  ///graph2
  $(document).ready(function () {

    const ctx = document.getElementById('myChart02').getContext('2d');
    const myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [{% for i in qs_gene %}'{{i | safe}}',{% endfor %}],
    datasets: [{
      label: 'No of Publications',
      data: [{% for i in qs_gene %}'{{i.publicationsCount | safe}}', {% endfor %}],
    backgroundColor: [
    'rgba(255, 99, 132, 0.2)',
    'rgba(54, 162, 235, 0.2)',
    'rgba(255, 206, 86, 0.2)',
    'rgba(75, 192, 192, 0.2)',
    'rgba(153, 102, 255, 0.2)',
    'rgba(255, 159, 64, 0.2)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(285, 159, 64, 5.2)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',

  ],
    borderColor: [
    'rgba(255, 99, 132, 1)',
    'rgba(54, 162, 235, 1)',
    'rgba(255, 206, 86, 1)',
    'rgba(75, 192, 192, 1)',
    'rgba(153, 102, 255, 1)',
    'rgba(255, 159, 64, 1)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(255, 159, 64, 1)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',
  ],
    borderWidth: 1
    }]
      },
    options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
    });



  });


  ///graph3
  $(document).ready(function () {

    const ctx = document.getElementById('myChart03').getContext('2d');
    const myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [{% for i in qs_variant %}'{{i.rs_id|safe}}',{% endfor %}],
    datasets: [{
      label: 'No of Publications',
      data: [{% for i in qs_variant %}'{{i.publicationsCount|safe}}', {% endfor %}],
    backgroundColor: [
    'rgba(255, 99, 132, 0.2)',
    'rgba(54, 162, 235, 0.2)',
    'rgba(255, 206, 86, 0.2)',
    'rgba(75, 192, 192, 0.2)',
    'rgba(153, 102, 255, 0.2)',
    'rgba(255, 159, 64, 0.2)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(285, 159, 64, 5.2)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',
  ],
    borderColor: [
    'rgba(255, 99, 132, 1)',
    'rgba(54, 162, 235, 1)',
    'rgba(255, 206, 86, 1)',
    'rgba(75, 192, 192, 1)',
    'rgba(153, 102, 255, 1)',
    'rgba(255, 159, 64, 1)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(255, 159, 64, 1)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',
  ],
    borderWidth: 1
    }]
      },
    options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
    });



  });


  ///graph4
  $(document).ready(function () {

    const ctx = document.getElementById('myChart04').getContext('2d');
    const myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [{% for i in qs_disease %}'{{i.name| safe}}',{% endfor %}],
    datasets: [{
      label: 'No of Publications',
      data: [{% for i in qs_disease %}'{{i.publicationsCount|safe}}', {% endfor %}],
    backgroundColor: [
    'rgba(255, 99, 132, 0.2)',
    'rgba(54, 162, 235, 0.2)',
    'rgba(255, 206, 86, 0.2)',
    'rgba(75, 192, 192, 0.2)',
    'rgba(153, 102, 255, 0.2)',
    'rgba(255, 159, 64, 0.2)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(285, 159, 64, 5.2)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',
  ],
    borderColor: [
    'rgba(255, 99, 132, 1)',
    'rgba(54, 162, 235, 1)',
    'rgba(255, 206, 86, 1)',
    'rgba(75, 192, 192, 1)',
    'rgba(153, 102, 255, 1)',
    'rgba(255, 159, 64, 1)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(255, 159, 64, 1)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',
  ],
    borderWidth: 1
}]
  },
    options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});



});





  ///graph5
  $(document).ready(function () {

    const ctx = document.getElementById('myChart05').getContext('2d');
    const myChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [{% for i in countries %} '{{i}}',{% endfor %}],
    datasets: [{
      label: 'No of Publications',
      data: [{% for i in publications %} {{ i }}, {% endfor %}],
    backgroundColor: [
    'rgba(255, 99, 132, 0.2)',
    'rgba(54, 162, 235, 0.2)',
    'rgba(255, 206, 86, 0.2)',
    'rgba(75, 192, 192, 0.2)',
    'rgba(153, 102, 255, 0.2)',
    'rgba(255, 159, 64, 0.2)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(285, 159, 64, 5.2)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',
  ],
    borderColor: [
    'rgba(255, 99, 132, 1)',
    'rgba(54, 162, 235, 1)',
    'rgba(255, 206, 86, 1)',
    'rgba(75, 192, 192, 1)',
    'rgba(153, 102, 255, 1)',
    'rgba(255, 159, 64, 1)',
    'rgba(195, 79, 64, 5.2)',
    'rgba(255, 159, 64, 1)',
    'rgba(0, 128, 0, 3.2)',
    'rgba(108, 122, 137, 0.2)',
  ],
    borderWidth: 1
}]
},
    options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});



});



</script>




{% endblock %}


{% endblock %}

<div class="row">
  <div class="col-md-3">
    <nav class="navigation" id="mainNav">
      <ul>
        <div class="no_style">
          <li><a class="navigation__link" href="#1">Data Overview</a></li>
          {% comment %} <li><a class="navigation__link" href="#2_0">Genes, Drugs, Variants and Diseases</a></li> {% endcomment %}
          <li><a class="navigation__link" href="#2_1">Graphs</a></li>
          <!-- <li><a class="navigation__link" href="#2_2">Map</a></li> -->
          <li><a class="navigation__link" href="#2">Data Distribution</a></li>

        </div>
      </ul>
    </nav>
  </div>
  <div class="col-md-9 section1">
    <div class="page-section" id="1">

      <h3 class="text-center">Data Overview</h3>
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Category</th>
            <th scope="col">Total Number</th>
          </tr>
        </thead>
        <tr>
          <td>GENES</td>
          <td>{{ gene_count | default:'0' }}</td>
        </tr>
        <tr>
          <td>DRUGS</td>
          <td>{{ drug_count | default:'0' }}</td>
        </tr>
        <tr>
          <td>DISEASES </td>
          <td>{{ disease_count | default:'0' }}</td>
        </tr>
        <tr>
          <td>VARIANTS</td>
          <td>{{ variant_count | default:'0' }}</td>
        </tr>
      </table>

    </div>

    <div class="mt-4">
     <span> Top Ten Drugs</span>
    <canvas id="myChart01" width="200" height="100"></canvas>
    </div>

    <div class="">
      <span> Top Ten Genes</span>
    <canvas id="myChart02" width="200" height="100"></canvas>
  </div>

  <div class="">
    <span> Top Ten Variants</span>
    <canvas id="myChart03" width="200" height="100"></canvas>
  </div>

  <div class="">
    <span> Top Ten Diseases</span>
    <canvas id="myChart04" width="300" height="100"></canvas>
  </div>


    {% comment %} <div class="page-section" id="2_1">
      <h3 class="text-center">Graphs</h3>
   

    </div> {% endcomment %}

    {% comment %} <div class="page-section" id="2"> {% endcomment %}


      {% comment %} <h3 class="text-center">Data Distribution</h3> {% endcomment %}
      {% comment %} <div class="row">
        <div class="col-12">

          {{map_01|safe}}
        </div>

        {% for i in results %}
        <p>{{i.country_of_participants}}: {{i.publication_count}}| {{i.longitude}}{{i.lattitude}}</p>
        {% endfor %}
      </div> {% endcomment %}

      {% comment %} ---
      <div id="map"></div>
      ---


    </div> {% endcomment %}



  </div>


</div>
</div>

{% endblock %}



  <script>
    var map = L.map('map').setView([51.505, -0.09], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    {% for location in locations %}
        L.marker([{{ location.latitude }}, {{ location.longitude }}]).addTo(map)
            .bindPopup('{{ location.name }}');
    {% endfor %}
</script>

